PARTIE OBLIGATOIRE
___ V.1 ________________________________________________________________________
OK

___ V.2 ________________________________________________________________________
1.	VM Creation
	Name		: RS1
	Type		: Linux
	Version		: Debian (64-bit)
	Memory size	: 1024 MB
	Virtual hard disk
		File size				: 8 GB
		Hard disk tfile type	: VDI
		Storage					: Fixed size
	Network
		Adapter 1
			Attached to	: Bridge Adapter
			Name		: en0: Ethernet
			Advanced
				Adapter Type		: Intel PRO/1000 MT Desktop
				Promiscuous mode	: Allow All

2. OS Installation
	Basic configuration
		Selected language	: English
		Selected location	: other -> Europe -> France
		Locales config		: US - en_US.UTF-8
		Keyboard			: American English
	Network configuration
		Hostname		: debian
		Domaine name	:
	Users configuration
		Root password	: root
		Nonadm user		: roger
			Password	: roger
	Partion Disks
		Partitioning method	: Manual
			#1 2.4 GB	/
			#2 4.2 GB	/usr
			#3 2.0 GB	/swap
	Package manager
		Mirror counry	: France
		Archive mirror	: ftp.fr.debian.org
		HTTP Proxy		:
	Refuse popularity-contest
	Software selection
		SSH server
	Install the GRUB boot loader on a hard disk /dev/sda

3.	Update and upgrade system and packages
		root@debian# apt-get update
		root@debian# apt-get upgrade

___ V.3 Network and Security Part ______________________________________________

1.	Non root user was created durring OS installation
2.	Log as root and install `sudo` package
	Add roger to sudo's group
		root@debian# adduser roger sudo
	Exit from root and never come in back
3.	roger@debian$ sudo vi /etc/network/interfaces
	iface enp0s3 inet static
		address 10.13.31.1
		netmask 255.255.255.252
		gateway 10.13.254.254
	roger@debian$ sudo reboot
4.	Through Guest machine
		roger@debian$ sudo vi /etc/ssh/sshd_config
			Port 2222
			PermitRootLogin no
		roger@debian$ sudo service sshd restart
	Through Host machine
		amalsago@42.fr$ ssh-keygen
		amalsago@42.fr$ ssh-copy-id roger@10.13.31.1 -p 2222
	Through Guest machine
		roger@debian$ sudo vi /etc/ssh/sshd_config
			PubkeyAuthentification yes
			PasswordAuthentification no
		roger@debian$ sudo service sshd restart
	Now I can work on server through ssh from Host machine	
		amalsago@42.fr$ ssh roger@10.13.31.1 -p 2222
5.	roger@debian$ sudo vi firewall
		#!/bin/bash

		iptables -F
		iptables -X
		iptables -P INPUT DROP
		iptables -P FORWARD DROP
		iptables -P OUTPUT DROP
		# Accept all established connection
		iptables -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT
		iptables -A OUTPUT -m state --state ESTABLISHED,RELATED -j ACCEPT

		# Authorize loopback
		iptables -A INPUT -i lo -j ACCEPT
		iptables -A OUTPUT -o lo -j ACCEPT

		# Allow SSH connection
		iptables -A INPUT -p tcp -m state --state NEW --dport 2222 -j ACCEPT


	roger@debian$ sudo chmod +x firewall










sudo iptables-save > /etc/iptables/rules.v4
sudo iptables-restore < /etc/iptables/rules.v4

6)
sudo fail2ban-client status					- to see status of f2b
sudo fail2ban-client status ssh				- to see status of ssh jail
sudo fail2ban-client set ssh unbanip @IP	- to unban IP
